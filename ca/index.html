<!DOCTYPE html>
<html lang="ca" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 
    ================================================================
    SEO I ETIQUETES PER A LA VERSIÓ EN CATALÀ
    ================================================================
    -->

    <title>Bancfy | El Futur de les Finances Personals amb IA i Kakebo</title>
    <meta name="description" content="Bancfy és l'app definitiva per a la teva salut financera. Fes servir el mètode Kakebo, IA, ludificació i educació per controlar les teves despeses, estalviar i assolir els teus objectius. Uneix-te a la llista d'espera!">
    <meta name="keywords" content="Bancfy, finances personals, app de pressupost, mètode Kakebo, estalviar diners, salut financera, intel·ligència artificial, ludificació, bancbot, control de despeses, inversió, criptomonedes">
    
    <!-- Etiqueta Canònica: Apunta a la URL preferida per a aquesta pàgina en català. -->
    <link rel="canonical" href="https://www.bancfy.com/ca/" />

    <!-- Etiquetes Hreflang: Indiquen a Google les versions d'aquesta pàgina per a altres idiomes. -->
    <link rel="alternate" hreflang="es" href="https://www.bancfy.com/es/" />
    <link rel="alternate" hreflang="ca" href="https://www.bancfy.com/ca/" />
    <link rel="alternate" hreflang="eu" href="https://www.bancfy.com/eu/" />
    <link rel="alternate" hreflang="en" href="https://www.bancfy.com/" />
    <link rel="alternate" hreflang="de" href="https://www.bancfy.com/de/" />
    <link rel="alternate" hreflang="de-CH" href="https://www.bancfy.com/de-ch/" />
    <link rel="alternate" hreflang="fr" href="https://www.bancfy.com/fr/" />
    <link rel="alternate" hreflang="it" href="https://www.bancfy.com/it/" />
    <link rel="alternate" hreflang="pt" href="https://www.bancfy.com/pt/" />
    <link rel="alternate" hreflang="ja" href="https://www.bancfy.com/ja/" />
    <link rel="alternate" hreflang="ko" href="https://www.bancfy.com/ko/" />
    <link rel="alternate" hreflang="zh" href="https://www.bancfy.com/zh/" />
    <link rel="alternate" hreflang="ar" href="https://www.bancfy.com/ar/" />
    <link rel="alternate" hreflang="x-default" href="https://www.bancfy.com/" />

    <!-- Dades Estructurades (JSON-LD) en Català -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Bancfy",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "iOS, Android, Web",
      "description": "Bancfy és una aplicació de finances personals que combina el mètode Kakebo amb Intel·ligència Artificial per ajudar els usuaris a controlar les seves despeses, estalviar diners i assolir els seus objectius financers.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "Bancfy"
      }
    }
    </script>
    
    <meta name="author" content="Bancfy">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook per a Català -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.bancfy.com/ca/">
    <meta property="og:title" content="Bancfy | La teva App de Finances amb IA i Kakebo">
    <meta property="og:description" content="Pren el control dels teus diners amb el mètode Kakebo, IA, ludificació i educació financera.">
    <meta property="og:image" content="https://www.bancfy.com/images/logo.png">

    <!-- Twitter per a Català -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.bancfy.com/ca/">
    <meta property="twitter:title" content="Bancfy | La teva App de Finances amb IA i Kakebo">
    <meta property="twitter:description" content="Pren el control dels teus diners amb el mètode Kakebo, IA, ludificació i educació financera.">
    <meta property="twitter:image" content="https://www.bancfy.com/images/logo.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Urbanist -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="/images/logo.png" type="image/png">

    <style>
        body { font-family: 'Urbanist', sans-serif; }
        :root {
            --navy: #0C2340;
            --gold: #C8B273;
            --gold-hover: #bda66b;
            --light-gray: #F7F7F7;
        }
        .bg-navy { background-color: var(--navy); }
        .text-navy { color: var(--navy); }
        .bg-gold { background-color: var(--gold); }
        .text-gold { color: var(--gold); }
        .hover\:bg-gold-hover:hover { background-color: var(--gold-hover); }
        .border-gold { border-color: var(--gold); }
        .ring-gold:focus { ring-color: var(--gold); }
        .bg-light-gray { background-color: var(--light-gray); }
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .group:hover .group-hover\:block { display: block; }
        .modal-backdrop { transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding-top: 0;
            padding-bottom: 0;
        }
        .faq-item.active .faq-answer {
            max-height: 200px; /* Adjust as needed */
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .faq-item.active .faq-arrow { transform: rotate(180deg); }
        .faq-arrow { transition: transform 0.3s ease-in-out; }
        .mobile-lang-arrow.rotate-180 { transform: rotate(180deg); }
    </style>
</head>
<body class="bg-white text-navy antialiased">

    <!-- ========== HEADER ========== -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/ca/" class="text-2xl font-bold text-navy flex items-center gap-3">
                <img src="/images/logo.png" alt="Logo de Bancfy" class="w-10 h-10 rounded-full">
                Bancfy
            </a>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#features" class="text-navy hover:text-gold transition-colors duration-300">Característiques</a>
                <a href="/ca/blog.html" class="text-navy hover:text-gold transition-colors duration-300">Blog</a>
                <a href="#faq" class="text-navy hover:text-gold transition-colors duration-300">FAQ</a>
                <a href="#contact" class="text-navy hover:text-gold transition-colors duration-300">Contacte</a>
                <!-- Selector d'Idioma (Escriptori) -->
                <div class="relative group">
                    <button id="lang-selector-btn" class="flex items-center text-navy hover:text-gold transition-colors duration-300">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/c/ce/Flag_of_Catalonia.svg" alt="Bandera de Catalunya" class="w-5 h-auto mr-2 rounded-sm">
                        <span>CA</span>
                        <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="lang-dropdown" class="absolute hidden group-hover:block bg-white shadow-lg rounded-md mt-2 py-1 w-48 right-0 max-h-60 overflow-y-auto">
                        <!-- Idiomes injectats per JS -->
                    </div>
                </div>
            </div>
            <a href="#newsletter" class="hidden md:inline-block bg-gold text-white font-semibold px-5 py-2 rounded-lg shadow-md hover:bg-gold-hover transition-all duration-300 transform hover:scale-105">
                Uneix-te a l'Espera
            </a>
            <button id="mobile-menu-button" class="md:hidden text-navy">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- Menú Mòbil -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
             <a href="#features" class="block py-2 px-4 text-sm hover:bg-light-gray">Característiques</a>
             <a href="/ca/blog.html" class="block py-2 px-4 text-sm hover:bg-light-gray">Blog</a>
             <a href="#faq" class="block py-2 px-4 text-sm hover:bg-light-gray">FAQ</a>
             <a href="#contact" class="block py-2 px-4 text-sm hover:bg-light-gray">Contacte</a>
             <!-- Selector d'Idioma (Mòbil) -->
             <div class="border-t border-gray-200">
                <div class="px-4 py-3">
                    <button id="mobile-lang-selector-btn" class="w-full flex items-center text-left text-sm text-navy">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/c/ce/Flag_of_Catalonia.svg" alt="Bandera de Catalunya" class="w-5 h-auto mr-3 rounded-sm">
                        <span class="font-semibold">Català</span>
                        <svg class="mobile-lang-arrow w-4 h-4 ml-auto transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                </div>
                <div id="mobile-lang-dropdown" class="hidden bg-light-gray px-4 pb-3 space-y-1">
                    <!-- Idiomes injectats per JS -->
                </div>
             </div>
        </div>
    </header>

    <!-- ========== CONTINGUT PRINCIPAL ========== -->
    <main>
        <!-- ========== SECCIÓ HERO ========== -->
        <section class="bg-light-gray overflow-hidden">
            <div class="container mx-auto px-6 py-20 md:py-28">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <!-- Columna de Text -->
                    <div class="text-center md:text-left">
                        <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold text-navy leading-tight mb-4 reveal">
                            Benvingut al futur de les finances personals.
                        </h1>
                        <p class="text-lg md:text-xl text-gray-600 max-w-xl mx-auto md:mx-0 mb-8 reveal" style="transition-delay: 200ms;">
                            Bancfy no és només una app, és el teu nou ecosistema financer. Combinem la saviesa del mètode Kakebo amb la potència de la IA per donar-te una claredat i un control que mai abans havies imaginat.
                        </p>
                        <div class="flex flex-col sm:flex-row justify-center md:justify-start items-center gap-4 reveal" style="transition-delay: 400ms;">
                            <a href="#newsletter" class="bg-gold text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gold-hover transition-all duration-300 transform hover:scale-105 w-full sm:w-auto">
                                Uneix-te a la revolució
                            </a>
                            <a href="#features" class="bg-white text-navy font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-200 transition-all duration-300 transform hover:scale-105 w-full sm:w-auto">
                                Descobreix-ne més
                            </a>
                        </div>
                    </div>
                    <!-- Columna d'Imatge -->
                    <div class="relative flex justify-center items-center reveal" style="transition-delay: 300ms;">
                         <div class="absolute w-full h-full bg-navy/10 rounded-full blur-3xl -z-10"></div>
                         <img src="/images/cabecera.png" 
                             alt="Vista de l'aplicació Bancfy en un smartphone" 
                             class="rounded-3xl shadow-2xl max-w-sm w-full transform transition-transform duration-500 hover:scale-105 z-10">
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== SECCIÓ DE CARACTERÍSTIQUES ========== -->
        <section id="features" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">L'app més completa per a la teva salut financera.</h2>
                    <p class="text-gray-600 mt-2 max-w-3xl mx-auto reveal" style="transition-delay: 200ms;">Hem combinat mètodes provats amb tecnologia d'avantguarda per donar-te un control sense precedents.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Característica: Kakebo -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">Mètode Kakebo Digital</h3><p class="text-gray-600">L'art japonès d'estalviar, simplificat. Registra, analitza i pren consciència de cada despesa.</p></div>
                    </div>
                    <!-- Característica: Bancbot IA -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 100ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V8.25a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 8.25v7.5A2.25 2.25 0 006.75 18z" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">Bancbot, el teu Coach IA</h3><p class="text-gray-600">Rep consells personalitzats gràcies al Machine Learning que aprèn dels teus hàbits.</p></div>
                    </div>
                    <!-- Característica: Gamificació -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 200ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9a9.75 9.75 0 100-13.5h9a9.75 9.75 0 100 13.5zM16.5 18.75a9.75 9.75 0 00-9-13.5" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">Ludificació Divertida</h3><p class="text-gray-600">Estalviar és un joc. Guanya trofeus i competeix en reptes individuals o socials.</p></div>
                    </div>
                    <!-- Característica: Comptes -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 300ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">Tots els teus Comptes</h3><p class="text-gray-600">Corrent, estalvi, inversió, cripto i crèdits. Tot en un sol lloc, fins i tot compartits!</p></div>
                    </div>
                    <!-- Característica: Educació -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 400ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5z" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">Educació Interactiva</h3><p class="text-gray-600">Aprèn finances amb minijocs i píndoles de coneixement. Desbloqueja nivells!</p></div>
                    </div>
                    <!-- Característica: Radar -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 500ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25a8.964 8.964 0 014.971 1.572A8.965 8.965 0 0121 12a8.965 8.965 0 01-3.971 7.178A8.964 8.964 0 0112 21.75a8.964 8.964 0 01-7.178-3.971A8.965 8.965 0 013 12a8.965 8.965 0 013.971-7.178A8.964 8.964 0 0112 2.25z" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">Radar d'Oportunitats</h3><p class="text-gray-600">Descobreix l'impacte real de les despeses formiga i vampir i com podries haver-les invertit.</p></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== SECCIÓ D'EXPOSICIÓ DE L'APP ========== -->
        <section id="app-showcase" class="py-20 bg-light-gray">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">Visualitza el teu Èxit Financer</h2>
                    <p class="text-gray-600 mt-2 max-w-2xl mx-auto reveal" style="transition-delay: 200ms;">Una interfície neta i poderosa dissenyada per donar-te claredat, no més confusió.</p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 lg:gap-12 items-center">
                    <div class="reveal" style="transition-delay: 400ms;">
                        <img src="/images/imagen1.png" 
                             alt="Captura de pantalla de l'app Bancfy mostrant objectius d'estalvi" 
                             class="mx-auto rounded-2xl shadow-xl w-full max-w-sm">
                    </div>
                    <div class="reveal" style="transition-delay: 600ms;">
                        <img src="/images/imagen2.png" 
                             alt="Captura de pantalla de l'app Bancfy mostrant la secció de ludificació" 
                             class="mx-auto rounded-2xl shadow-xl w-full max-w-sm">
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== SECCIÓ DE STORYTELLING ========== -->
        <section id="story" class="py-20 bg-navy text-white">
            <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10 reveal">
                        <span class="font-semibold text-gold">LA NOSTRA HISTÒRIA</span>
                        <h2 class="text-3xl md:text-4xl font-bold mt-2">De la incertesa a la claredat amb Bancfy</h2>
                    </div>
                    <div class="text-gray-300 space-y-4 reveal" style="transition-delay: 200ms;">
                        <p>En algun moment, tots ens hem sentit aclaparats per les nostres finances. Despeses imprevistes, decisions impulsives i la sensació que els diners s'escorren entre els dits. Jo també hi vaig ser.</p>
                        <p class="font-semibold text-white">Durant anys, vaig lluitar amb les meves finances sense entendre per què no aconseguia estalviar. Les "despeses vampir" consumien el meu pressupost sense que me n'adonés. Em sentia perdut, sense eines que m'ajudessin de veritat.</p>
                        <p>Va ser llavors quan vaig decidir prendre el control. Així va néixer la idea de Bancfy: una eina que no només gestiona els diners, sinó que educa, motiva i transforma la teva relació amb ells.</p>
                        <p>Bancfy és el teu company en el viatge cap a la salut financera. El que ens distingeix és l'enfocament integral: no es tracta només de controlar, sinó d'entendre, aprendre i prendre decisions informades. És una eina dissenyada per apoderar-te.</p>
                        <p class="text-lg font-bold text-center mt-6 text-gold">Avui, et convido a fer el primer pas cap a una vida financera més saludable i conscient. Uneix-te a la comunitat Bancfy.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ========== SECCIÓ DE FAQ ========== -->
        <section id="faq" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">Preguntes Freqüents</h2>
                    <p class="text-gray-600 mt-2 max-w-3xl mx-auto reveal" style="transition-delay: 200ms;">Tens dubtes? Aquí resolem les més comunes.</p>
                </div>
                <div class="max-w-3xl mx-auto space-y-4">
                    <!-- FAQ Items -->
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>Què és exactament Bancfy?</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                            <p>Bancfy és el teu coach financer personal. Hem transformat el mètode japonès Kakebo en una experiència digital, intuïtiva i gamificada. No només t'ajudem a registrar les teves despeses, sinó a entendre-les i a prendre el control dels teus diners d'una manera senzilla i motivadora.</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>És segur utilitzar les meves dades a Bancfy?</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                            <p>Absolutament. La seguretat és el nostre pilar fonamental. Tota la teva informació està protegida amb xifratge d'extrem a extrem i protocols de seguretat de nivell bancari. La teva privacitat i les teves dades són només teves.</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>Podré sincronitzar en diferents dispositius?</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                           <p>I tant! La teva informació se sincronitza en temps real a tots els teus dispositius. A més, hem inclòs la funció de "comptes compartits", ideal per gestionar les finances en parella, amb la teva família o companys de pis.</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>He de connectar el meu compte bancari?</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                           <p>No és necessari. Creiem en el poder de registrar manualment les teves despeses per crear consciència, com ensenya el mètode Kakebo. No obstant això, per donar-te flexibilitat, també et permetem importar els teus moviments des d'un fitxer PDF, Excel o CSV de forma ràpida i senzilla.</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>Bancfy és gratuït?</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                           <p>Sí, el cor de Bancfy és i serà sempre gratuït, donant-te totes les eines que necessites per al teu dia a dia. Per a aquells que vulguin portar les seves finances al següent nivell, oferirem opcions Premium complementàries amb funcions avançades.</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>Quines divises i criptomonedes suporta?</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                           <p>Estem preparats per a un món global. Bancfy és compatible amb més de 50 divises tradicionals i més de 30 de les criptomonedes més importants, perquè tinguis una visió completa de tots els teus actius en un sol lloc.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== SECCIÓ DE NEWSLETTER ========== -->
        <section id="newsletter" class="py-20 bg-light-gray">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">La revolució financera comença el Novembre de 2025.</h2>
                <p class="text-gray-600 mt-3 max-w-2xl mx-auto mb-8 reveal" style="transition-delay: 200ms;">
                    No et quedis fora. Apunta't a la nostra newsletter i sigues el primer a rebre accés anticipat, notícies exclusives i consells per preparar el teu camí cap a la prosperitat.
                </p>
                <form id="newsletter-form" class="max-w-lg mx-auto reveal" style="transition-delay: 400ms;" novalidate>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="email" name="email" placeholder="El teu millor correu electrònic" required class="w-full px-5 py-3 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors" />
                        <button type="submit" class="bg-gold text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-gold-hover transition-all duration-300 transform hover:scale-105">
                            Apunta-m'hi!
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- ========== SECCIÓ DE CONTACTE ========== -->
        <section id="contact" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">Parlem?</h2>
                    <p class="text-gray-600 mt-2 max-w-2xl mx-auto mb-8 reveal" style="transition-delay: 200ms;">
                        Per a col·laboracions, premsa o qualsevol altra consulta, el nostre equip està a punt per escoltar-te. Emplena el formulari o escriu-nos a <a href="mailto:info@bancfy.com" class="text-gold font-semibold hover:underline">info@bancfy.com</a>.
                    </p>
                </div>
                <form id="contact-form" action="https://formspree.io/f/mblkoarn" method="POST" class="max-w-xl mx-auto bg-white p-8 rounded-xl shadow-lg reveal" style="transition-delay: 400ms;" novalidate>
                    <div class="space-y-6">
                        <div>
                            <label for="name" class="block text-sm font-semibold text-gray-700 mb-1">Nom</label>
                            <input type="text" name="name" id="name" required class="w-full px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-semibold text-gray-700 mb-1">Correu electrònic</label>
                            <input type="email" name="email" id="email" required class="w-full px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors">
                        </div>
                        <div>
                            <label for="subject" class="block text-sm font-semibold text-gray-700 mb-1">Assumpte</label>
                            <input type="text" name="subject" id="subject" required class="w-full px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-semibold text-gray-700 mb-1">Missatge</label>
                            <textarea name="message" id="message" rows="4" required class="w-full px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors"></textarea>
                        </div>
                        <div>
                            <button type="submit" class="w-full bg-gold text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-gold-hover transition-all duration-300 transform hover:scale-105">
                                Enviar Missatge
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <!-- ========== PEU DE PÀGINA ========== -->
    <footer class="bg-navy text-white">
        <div class="container mx-auto px-6 py-8">
             <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left">
                <div class="mb-4 md:mb-0">
                    <p class="font-semibold">&copy; 2025 Bancfy. Tots els drets reservats.</p>
                    <p class="text-sm text-gray-400">Dissenyat amb <span class="text-gold">&hearts;</span> per al teu benestar financer.</p>
                </div>
                <!-- ICONES SOCIALS -->
                <div class="flex space-x-5">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="Instagram"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163zm0 1.802c-3.143 0-3.505.011-4.73.068-2.695.123-3.993 1.423-4.116 4.116-.057 1.225-.068 1.586-.068 4.73s.011 3.505.068 4.73c.123 2.692 1.421 3.993 4.116 4.116 1.225.057 1.587.068 4.73.068s3.505-.011 4.73-.068c2.695-.123 3.993-1.423 4.116-4.116.057-1.225.068-1.586.068-4.73s-.011-3.505-.068-4.73c-.123-2.692-1.421-3.993-4.116-4.116-1.225-.057-1.586-.068-4.73-.068zm0 3.064c-2.835 0-5.153 2.318-5.153 5.153s2.318 5.153 5.153 5.153 5.153-2.318 5.153-5.153-2.318-5.153-5.153-5.153zm0 8.505c-1.841 0-3.35-1.509-3.35-3.35s1.509-3.35 3.35-3.35 3.35 1.509 3.35 3.35-1.509 3.35-3.35 3.35zm4.512-8.305c-.796 0-1.441.645-1.441 1.441s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.441-1.441-1.441z"/></svg></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="TikTok"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.05-4.84-.95-6.43-2.8-1.59-1.87-2.25-4.38-1.91-6.78.34-2.4 1.91-4.44 3.96-5.74.96-.6 2.07-.97 3.22-1.15.06-1.54.03-3.08.01-4.63.23-.02.47-.02.7-.02 1.33-.01 2.65-.02 3.98-.03z"/></svg></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="YouTube"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- ========== MODAL PER A FEEDBACK ========== -->
    <div id="feedback-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden modal-backdrop">
        <div class="bg-white rounded-lg shadow-2xl p-8 max-w-sm w-full text-center modal-content opacity-0 transform scale-95">
            <h3 id="modal-title" class="text-2xl font-bold text-navy mb-4"></h3>
            <p id="modal-message" class="text-gray-600 mb-6"></p>
            <button id="modal-close-button" class="bg-gold text-white font-bold py-2 px-6 rounded-lg hover:bg-gold-hover transition-colors">Tancar</button>
        </div>
    </div>

    <!-- ========== ICONES PER A FEEDBACK DE FORMULARI (OCULTES) ========== -->
    <div class="hidden">
        <svg id="icon-spinner" class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <svg id="icon-check" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg>
        <svg id="icon-error" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
    </div>
    
    <!-- Firebase SDK (versió actualitzada) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, where, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyDMjE9AFpmtPKcvZDMx-okQoKpHcjUF-Uc",
            authDomain: "bancfy.firebaseapp.com",
			databaseURL: "https://bancfy-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "bancfy",
            storageBucket: "bancfy.appspot.com",
            messagingSenderId: "151762707230",
            appId: "1:151762707230:web:2143e1d92e6a90f2689f0f",
			measurementId: "G-RS0WGCECK3"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.db = db;
        window.firestore = { collection, addDoc, serverTimestamp, query, where, getDocs };
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- LÒGICA DEL SELECTOR D'IDIOMES ---
            const supportedLangs = {
                'es': { name: 'Español', flag: 'es', url: '/es/' },
                'ca': { name: 'Català', flagUrl: 'https://upload.wikimedia.org/wikipedia/commons/c/ce/Flag_of_Catalonia.svg', url: '/ca/' },
                'eu': { name: 'Euskara', flagUrl: 'https://upload.wikimedia.org/wikipedia/commons/2/2d/Flag_of_the_Basque_Country.svg', url: '/eu/' },
                'en': { name: 'English', flag: 'gb', url: '/' },
                'de': { name: 'Deutsch', flag: 'de', url: '/de/' },
                'de-ch': { name: 'Schweizerdeutsch', flag: 'ch', url: '/de-ch/' },
                'fr': { name: 'Français', flag: 'fr', url: '/fr/' },
                'it': { name: 'Italiano', flag: 'it', url: '/it/' },
                'pt': { name: 'Português', flag: 'pt', url: '/pt/' },
                'ja': { name: '日本語', flag: 'jp', url: '/ja/' },
                'ko': { name: '한국어', flag: 'kr', url: '/ko/' },
                'zh': { name: '中文', flag: 'cn', url: '/zh/' },
                'ar': { name: 'العربية', flag: 'ae', url: '/ar/' }
            };

            const langDropdown = document.getElementById('lang-dropdown');
            const mobileLangDropdown = document.getElementById('mobile-lang-dropdown');

            for (const [code, langData] of Object.entries(supportedLangs)) {
                if (code === 'ca') continue; // No mostrar l'idioma actual a la llista

                const flagSrc = langData.flagUrl ? langData.flagUrl : `https://flagcdn.com/w20/${langData.flag}.png`;
                const innerHTML = `<img src="${flagSrc}" alt="Bandera de ${langData.name}" class="w-5 h-auto mr-3 rounded-sm"><span class="flex-1">${langData.name}</span>`;

                // Crear enllaç per al menú d'escriptori
                const desktopLink = document.createElement('a');
                desktopLink.href = langData.url;
                desktopLink.classList.add('flex', 'items-center', 'px-4', 'py-2', 'text-sm', 'text-gray-700', 'hover:bg-light-gray');
                desktopLink.innerHTML = innerHTML;
                langDropdown.appendChild(desktopLink);

                // Crear enllaç per al menú mòbil
                const mobileLink = document.createElement('a');
                mobileLink.href = langData.url;
                mobileLink.classList.add('flex', 'items-center', 'py-1.5', 'px-2', 'text-sm', 'text-gray-700', 'hover:text-gold', 'rounded-md', 'hover:bg-white');
                mobileLink.innerHTML = innerHTML;
                mobileLangDropdown.appendChild(mobileLink);
            }
            
            // --- LÒGICA DEL MENÚ MÒBIL I DESPLEGABLES ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileLangSelectorBtn = document.getElementById('mobile-lang-selector-btn');
            const mobileLangArrow = document.querySelector('.mobile-lang-arrow');
            
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            mobileLangSelectorBtn.addEventListener('click', (event) => {
                event.stopPropagation();
                mobileLangDropdown.classList.toggle('hidden');
                mobileLangArrow.classList.toggle('rotate-180');
            });

            mobileMenu.addEventListener('click', (e) => {
                if(e.target.tagName === 'A' && !mobileLangDropdown.contains(e.target) && !mobileLangSelectorBtn.contains(e.target)) {
                    mobileMenu.classList.add('hidden');
                }
            });

            // --- LÒGICA PER A ANIMACIONS I FAQ ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
            
            document.querySelectorAll('.faq-question').forEach(button => {
                button.addEventListener('click', () => {
                    const faqItem = button.parentElement;
                    faqItem.classList.toggle('active');
                });
            });

            // --- LÒGICA PER AL MODAL DE FEEDBACK ---
            const modal = document.getElementById('feedback-modal');
            const modalContent = modal.querySelector('.modal-content');
            const modalTitle = document.getElementById('modal-title');
            const modalMessage = document.getElementById('modal-message');
            const modalCloseButton = document.getElementById('modal-close-button');
            
            const modalTranslations = {
                ca: {
                    modal_close: 'Tancar', modal_thank_you: 'Gràcies!', modal_message_sent: 'El teu missatge s\'ha enviat correctament.', modal_welcome: 'Benvingut/da!', modal_subscribed: 'T\'has subscrit a la nostra newsletter.', modal_error: 'Error', modal_message_error: 'No s\'ha pogut enviar el missatge. Intenta-ho de nou.', modal_network_error: 'Ups! Hi ha hagut un problema de xarxa. Revisa la teva connexió.', modal_subscribe_error: 'No hem pogut processar la teva subscripció. Intenta-ho més tard.', modal_email_exists: 'Aquest correu electrònic ja està registrat. Gràcies pel teu interès!', modal_invalid_email: 'Si us plau, introdueix un correu electrònic vàlid.',
                    form_sending: 'Enviant...', form_sent: 'Enviat', form_error: 'Error', form_subscribing: 'Apuntant...', form_subscribed: 'Apuntat'
                }
            };
            const t = modalTranslations.ca;

            function showModal(titleKey, messageKey) {
                modalTitle.textContent = t[titleKey] || titleKey;
                modalMessage.textContent = t[messageKey] || messageKey;
                modalCloseButton.textContent = t['modal_close'];
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.style.opacity = '1';
                    modalContent.style.opacity = '1';
                    modalContent.style.transform = 'scale(1)';
                }, 10);
            }

            function hideModal() {
                 modal.style.opacity = '0';
                 modalContent.style.opacity = '0';
                 modalContent.style.transform = 'scale(0.95)';
                 setTimeout(() => modal.classList.add('hidden'), 300);
            }
            modalCloseButton.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) hideModal(); });

            // --- LÒGICA PER ALS FORMULARIS ---
            const contactForm = document.getElementById('contact-form');
            const newsletterForm = document.getElementById('newsletter-form');

            const setButtonFeedback = (button, state, originalHTML) => {
                const feedbackText = {
                    contact: { loading: t.form_sending, success: t.form_sent, error: t.form_error },
                    newsletter: { loading: t.form_subscribing, success: t.form_subscribed, error: t.form_error }
                };
                const formType = button.form.id.includes('contact') ? 'contact' : 'newsletter';
                const text = feedbackText[formType][state] || '';
                button.disabled = true;
                button.innerHTML = '';
                if(!button.dataset.originalClasses) {
                    const originalClasses = Array.from(button.classList);
                    button.dataset.originalClasses = JSON.stringify(originalClasses.filter(c => c.startsWith('bg-') || c.startsWith('hover:bg-') || c.startsWith('transform') || c.startsWith('hover:scale')));
                }
                button.classList.remove(...JSON.parse(button.dataset.originalClasses));
                button.classList.add('flex', 'items-center', 'justify-center', 'transition-all');
                const icons = {
                    loading: document.getElementById('icon-spinner')?.cloneNode(true),
                    success: document.getElementById('icon-check')?.cloneNode(true),
                    error: document.getElementById('icon-error')?.cloneNode(true)
                };
                const icon = icons[state];
                if (icon) {
                    icon.classList.remove('hidden');
                    button.appendChild(icon);
                }
                if (text) {
                    const textSpan = document.createElement('span');
                    textSpan.className = 'ml-2';
                    textSpan.textContent = text;
                    button.appendChild(textSpan);
                }
                if (state === 'success') button.classList.add('bg-green-500');
                else if (state === 'error') button.classList.add('bg-red-500');
                else button.classList.add('bg-gold', 'opacity-75');
                if (state === 'success' || state === 'error') {
                    setTimeout(() => {
                        button.disabled = false;
                        button.innerHTML = originalHTML;
                        button.classList.remove('flex', 'items-center', 'justify-center', 'bg-green-500', 'bg-red-500', 'bg-gold', 'opacity-75', 'transition-all');
                        button.classList.add(...JSON.parse(button.dataset.originalClasses));
                    }, 2500);
                }
            };

            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const form = e.target;
                const button = form.querySelector('button[type="submit"]');
                const originalButtonHTML = button.innerHTML;
                setButtonFeedback(button, 'loading', originalButtonHTML);
                fetch(form.action, {
                    method: 'POST', body: new FormData(form), headers: { 'Accept': 'application/json' }
                }).then(response => {
                    if (response.ok) {
                        setButtonFeedback(button, 'success', originalButtonHTML);
                        setTimeout(() => { showModal('modal_thank_you', 'modal_message_sent'); form.reset(); }, 500);
                    } else { throw new Error('Response not ok'); }
                }).catch(() => {
                    setButtonFeedback(button, 'error', originalButtonHTML);
                    setTimeout(() => showModal('modal_error', 'modal_message_error'), 500);
                });
            });

            newsletterForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const form = e.target;
                const emailInput = form.querySelector('input[name="email"]');
                const emailValue = emailInput.value.trim().toLowerCase();
                const button = form.querySelector('button[type="submit"]');
                const originalButtonHTML = button.innerHTML;

                if (!emailValue || !emailInput.checkValidity()) {
                    showModal('modal_error', 'modal_invalid_email');
                    return;
                }
                if (typeof window.db === 'undefined' || typeof window.firestore === 'undefined') {
                    showModal('modal_error', 'modal_network_error');
                    return;
                }
                setButtonFeedback(button, 'loading', originalButtonHTML);
                const { collection, query, where, getDocs, addDoc, serverTimestamp } = window.firestore;
                const subscribersRef = collection(window.db, "subscribers");
                try {
                    const q = query(subscribersRef, where("email", "==", emailValue));
                    const querySnapshot = await getDocs(q);
                    if (!querySnapshot.empty) {
                        showModal('modal_welcome', 'modal_email_exists');
                        setButtonFeedback(button, 'success', originalButtonHTML);
                        return;
                    }
                    await addDoc(subscribersRef, {
                        email: emailValue,
                        subscribedAt: serverTimestamp(),
                        language: 'ca'
                    });
                    setButtonFeedback(button, 'success', originalButtonHTML);
                    setTimeout(() => { showModal('modal_welcome', 'modal_subscribed'); form.reset(); }, 500);
                } catch (error) {
                    console.error("Error en comprovar/afegir el document: ", error);
                    setButtonFeedback(button, 'error', originalButtonHTML);
                    setTimeout(() => showModal('modal_error', 'modal_subscribe_error'), 500);
                }
            });
        });
    </script>

</body>
</html>
