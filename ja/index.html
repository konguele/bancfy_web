<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 
    ================================================================
    SEOと日本語版のタグ
    ================================================================
    -->

    <title>Bancfy | AIと家計簿で個人の資産管理の未来を</title>
    <meta name="description" content="Bancfyはあなたの金融健全性のための究極のアプリです。家計簿メソッド、AI、ゲーミフィケーション、教育を活用して、支出を管理し、貯蓄し、目標を達成しましょう。ウェイティングリストに参加してください！">
    <meta name="keywords" content="Bancfy, 個人金融, 予算アプリ, 家計簿, お金を貯める, 金融健康, 人工知能, ゲーミフィケーション, bancbot, 支出追跡, 投資, 暗号通貨">
    
    <!-- Canonicalタグ：この日本語ページの優先URLを指します。 -->
    <link rel="canonical" href="https://www.bancfy.com/ja/" />

    <!-- Hreflangタグ：Googleにこのページの他の言語バージョンを伝えます。 -->
    <link rel="alternate" hreflang="es" href="https://www.bancfy.com/es/" />
    <link rel="alternate" hreflang="ca" href="https://www.bancfy.com/ca/" />
    <link rel="alternate" hreflang="eu" href="https://www.bancfy.com/eu/" />
    <link rel="alternate" hreflang="en" href="https://www.bancfy.com/" />
    <link rel="alternate" hreflang="de" href="https://www.bancfy.com/de/" />
    <link rel="alternate" hreflang="de-CH" href="https://www.bancfy.com/de-ch/" />
    <link rel="alternate" hreflang="fr" href="https://www.bancfy.com/fr/" />
    <link rel="alternate" hreflang="it" href="https://www.bancfy.com/it/" />
    <link rel="alternate" hreflang="pt" href="https://www.bancfy.com/pt/" />
    <link rel="alternate" hreflang="ja" href="https://www.bancfy.com/ja/" />
    <link rel="alternate" hreflang="ko" href="https://www.bancfy.com/ko/" />
    <link rel="alternate" hreflang="zh" href="https://www.bancfy.com/zh/" />
    <link rel="alternate" hreflang="ar" href="https://www.bancfy.com/ar/" />
    <link rel="alternate" hreflang="x-default" href="https://www.bancfy.com/" />

    <!-- 構造化データ (JSON-LD) 日本語 -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Bancfy",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "iOS, Android, Web",
      "description": "Bancfyは、家計簿メソッドと人工知能を組み合わせた個人金融アプリケーションで、ユーザーが支出を管理し、お金を節約し、金融目標を達成するのを支援します。",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "JPY"
      },
      "author": {
        "@type": "Organization",
        "name": "Bancfy"
      }
    }
    </script>
    
    <meta name="author" content="Bancfy">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook 日本語 -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.bancfy.com/ja/">
    <meta property="og:title" content="Bancfy | AIと家計簿であなたの金融アプリ">
    <meta property="og:description" content="家計簿メソッド、AI、ゲーミフィケーション、金融教育であなたのお金を管理しましょう。">
    <meta property="og:image" content="https://www.bancfy.com/images/logo.png">

    <!-- Twitter 日本語 -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.bancfy.com/ja/">
    <meta property="twitter:title" content="Bancfy | AIと家計簿であなたの金融アプリ">
    <meta property="twitter:description" content="家計簿メソッド、AI、ゲーミフィケーション、金融教育であなたのお金を管理しましょう。">
    <meta property="twitter:image" content="https://www.bancfy.com/images/logo.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Urbanist -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;500;600;700;800&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="/images/logo.png" type="image/png">

    <style>
        body { font-family: 'Urbanist', 'Noto Sans JP', sans-serif; }
        :root {
            --navy: #0C2340;
            --gold: #C8B273;
            --gold-hover: #bda66b;
            --light-gray: #F7F7F7;
        }
        .bg-navy { background-color: var(--navy); }
        .text-navy { color: var(--navy); }
        .bg-gold { background-color: var(--gold); }
        .text-gold { color: var(--gold); }
        .hover\:bg-gold-hover:hover { background-color: var(--gold-hover); }
        .border-gold { border-color: var(--gold); }
        .ring-gold:focus { ring-color: var(--gold); }
        .bg-light-gray { background-color: var(--light-gray); }
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .group:hover .group-hover\:block { display: block; }
        .modal-backdrop { transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; }
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding-top: 0;
            padding-bottom: 0;
        }
        .faq-item.active .faq-answer {
            max-height: 200px; /* Adjust as needed */
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .faq-item.active .faq-arrow { transform: rotate(180deg); }
        .faq-arrow { transition: transform 0.3s ease-in-out; }
        .mobile-lang-arrow.rotate-180 { transform: rotate(180deg); }
    </style>
</head>
<body class="bg-white text-navy antialiased">

    <!-- ========== ヘッダー ========== -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/ja/" class="text-2xl font-bold text-navy flex items-center gap-3">
                <img src="/images/logo.png" alt="Bancfyのロゴ" class="w-10 h-10 rounded-full">
                Bancfy
            </a>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#features" class="text-navy hover:text-gold transition-colors duration-300">特徴</a>
                <a href="/ja/blog.html" class="text-navy hover:text-gold transition-colors duration-300">ブログ</a>
                <a href="#faq" class="text-navy hover:text-gold transition-colors duration-300">FAQ</a>
                <a href="#contact" class="text-navy hover:text-gold transition-colors duration-300">お問い合わせ</a>
                <!-- 言語セレクター (デスクトップ) -->
                <div class="relative group">
                    <button id="lang-selector-btn" class="flex items-center text-navy hover:text-gold transition-colors duration-300">
                        <img src="https://flagcdn.com/w20/jp.png" alt="日本の国旗" class="w-5 h-auto mr-2 rounded-sm">
                        <span>JA</span>
                        <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="lang-dropdown" class="absolute hidden group-hover:block bg-white shadow-lg rounded-md mt-2 py-1 w-48 right-0 max-h-60 overflow-y-auto">
                        <!-- JSによって言語が挿入されます -->
                    </div>
                </div>
            </div>
            <a href="#newsletter" class="hidden md:inline-block bg-gold text-white font-semibold px-5 py-2 rounded-lg shadow-md hover:bg-gold-hover transition-all duration-300 transform hover:scale-105">
                ウェイティングリストに参加
            </a>
            <button id="mobile-menu-button" class="md:hidden text-navy">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- モバイルメニュー -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
             <a href="#features" class="block py-2 px-4 text-sm hover:bg-light-gray">特徴</a>
             <a href="/ja/blog.html" class="block py-2 px-4 text-sm hover:bg-light-gray">ブログ</a>
             <a href="#faq" class="block py-2 px-4 text-sm hover:bg-light-gray">FAQ</a>
             <a href="#contact" class="block py-2 px-4 text-sm hover:bg-light-gray">お問い合わせ</a>
             <!-- 言語セレクター (モバイル) -->
             <div class="border-t border-gray-200">
                <div class="px-4 py-3">
                    <button id="mobile-lang-selector-btn" class="w-full flex items-center text-left text-sm text-navy">
                        <img src="https://flagcdn.com/w20/jp.png" alt="日本の国旗" class="w-5 h-auto mr-3 rounded-sm">
                        <span class="font-semibold">日本語</span>
                        <svg class="mobile-lang-arrow w-4 h-4 ml-auto transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                </div>
                <div id="mobile-lang-dropdown" class="hidden bg-light-gray px-4 pb-3 space-y-1">
                    <!-- JSによって言語が挿入されます -->
                </div>
             </div>
        </div>
    </header>

    <!-- ========== メインコンテンツ ========== -->
    <main>
        <!-- ========== ヒーローセクション ========== -->
        <section class="bg-light-gray overflow-hidden">
            <div class="container mx-auto px-6 py-20 md:py-28">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <!-- テキスト列 -->
                    <div class="text-center md:text-left">
                        <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold text-navy leading-tight mb-4 reveal">
                            個人の資産管理の未来へようこそ。
                        </h1>
                        <p class="text-lg md:text-xl text-gray-600 max-w-xl mx-auto md:mx-0 mb-8 reveal" style="transition-delay: 200ms;">
                            Bancfyは単なるアプリではなく、あなたの新しい金融エコシステムです。家計簿の知恵とAIの力を組み合わせ、これまでに想像もできなかったほどの明確さと管理能力を提供します。
                        </p>
                        <div class="flex flex-col sm:flex-row justify-center md:justify-start items-center gap-4 reveal" style="transition-delay: 400ms;">
                            <a href="#newsletter" class="bg-gold text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gold-hover transition-all duration-300 transform hover:scale-105 w-full sm:w-auto">
                                革命に参加する
                            </a>
                            <a href="#features" class="bg-white text-navy font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-200 transition-all duration-300 transform hover:scale-105 w-full sm:w-auto">
                                もっと詳しく
                            </a>
                        </div>
                    </div>
                    <!-- 画像列 -->
                    <div class="relative flex justify-center items-center reveal" style="transition-delay: 300ms;">
                         <div class="absolute w-full h-full bg-navy/10 rounded-full blur-3xl -z-10"></div>
                         <img src="/images/cabecera.png" 
                             alt="スマートフォン上のBancfyアプリケーションの表示" 
                             class="rounded-3xl shadow-2xl max-w-sm w-full transform transition-transform duration-500 hover:scale-105 z-10">
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== 特徴セクション ========== -->
        <section id="features" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">あなたの金融健全性のための最も完全なアプリ。</h2>
                    <p class="text-gray-600 mt-2 max-w-3xl mx-auto reveal" style="transition-delay: 200ms;">実績のある方法と最先端技術を組み合わせ、前例のない管理能力を提供します。</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- 特徴：家計簿 -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">デジタル家計簿メソッド</h3><p class="text-gray-600">日本の節約術をシンプルに。すべての支出を記録、分析し、意識します。</p></div>
                    </div>
                    <!-- 特徴：Bancbot AI -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 100ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V8.25a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 8.25v7.5A2.25 2.25 0 006.75 18z" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">あなたのAIコーチ、Bancbot</h3><p class="text-gray-600">あなたの習慣から学習する機械学習のおかげで、パーソナライズされたアドバイスを受け取れます。</p></div>
                    </div>
                    <!-- 特徴：ゲーミフィケーション -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 200ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9a9.75 9.75 0 100-13.5h9a9.75 9.75 0 100 13.5zM16.5 18.75a9.75 9.75 0 00-9-13.5" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">楽しいゲーミフィケーション</h3><p class="text-gray-600">節約はゲームです。トロフィーを獲得し、個人または社会的なチャレンジで競いましょう。</p></div>
                    </div>
                    <!-- 特徴：口座 -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 300ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">すべての口座を一つに</h3><p class="text-gray-600">当座、貯蓄、投資、暗号資産、ローン。共有口座も含め、すべてを一つの場所で！</p></div>
                    </div>
                    <!-- 特徴：教育 -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 400ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5z" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">インタラクティブな教育</h3><p class="text-gray-600">ミニゲームや知識のピルで金融を学びましょう。新しいレベルをアンロック！</p></div>
                    </div>
                    <!-- 特徴：レーダー -->
                    <div class="p-6 bg-light-gray rounded-xl shadow-sm reveal flex items-start space-x-4" style="transition-delay: 500ms;">
                        <div class="flex-shrink-0 h-12 w-12 rounded-full bg-gold text-white flex items-center justify-center"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25a8.964 8.964 0 014.971 1.572A8.965 8.965 0 0121 12a8.965 8.965 0 01-3.971 7.178A8.964 8.964 0 0112 21.75a8.964 8.964 0 01-7.178-3.971A8.965 8.965 0 013 12a8.965 8.965 0 013.971-7.178A8.964 8.964 0 0112 2.25z" /></svg></div>
                        <div><h3 class="text-xl font-semibold text-navy mb-1">機会レーダー</h3><p class="text-gray-600">「ラテマネー」や幽霊支出の真の影響と、それをどう投資できたかを発見しましょう。</p></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== アプリのショーケースセクション ========== -->
        <section id="app-showcase" class="py-20 bg-light-gray">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">あなたの経済的成功を視覚化</h2>
                    <p class="text-gray-600 mt-2 max-w-2xl mx-auto reveal" style="transition-delay: 200ms;">混乱ではなく、明確さを提供するために設計された、クリーンで強力なインターフェース。</p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 lg:gap-12 items-center">
                    <div class="reveal" style="transition-delay: 400ms;">
                        <img src="/images/imagen1.png" 
                             alt="貯蓄目標を示すBancfyアプリのスクリーンショット" 
                             class="mx-auto rounded-2xl shadow-xl w-full max-w-sm">
                    </div>
                    <div class="reveal" style="transition-delay: 600ms;">
                        <img src="/images/imagen2.png" 
                             alt="ゲーミフィケーションセクションを示すBancfyアプリのスクリーンショット" 
                             class="mx-auto rounded-2xl shadow-xl w-full max-w-sm">
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== ストーリーテリングセクション ========== -->
        <section id="story" class="py-20 bg-navy text-white">
            <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10 reveal">
                        <span class="font-semibold text-gold">私たちの物語</span>
                        <h2 class="text-3xl md:text-4xl font-bold mt-2">不確実性から明確さへ、Bancfyと共に</h2>
                    </div>
                    <div class="text-gray-300 space-y-4 reveal" style="transition-delay: 200ms;">
                        <p>誰もが一度は自分の財政に圧倒されたことがあるでしょう。予期せぬ出費、衝動的な決断、そしてお金が指の間からすり抜けていく感覚。私もそうでした。</p>
                        <p class="font-semibold text-white">何年もの間、なぜ貯金できないのか理解できないまま、私は自分の財政と格闘しました。「吸血鬼支出」が気づかないうちに私の予算を食いつぶしていました。本当に助けになるツールもなく、途方に暮れていました。</p>
                        <p>その時、私はコントロールを取り戻すことを決意しました。こうしてBancfyのアイデアが生まれました。お金を管理するだけでなく、教育し、動機付け、お金との関係を変革するツールです。</p>
                        <p>Bancfyは、金融の健全性への旅のあなたの伴侶です。私たちを際立たせているのは、包括的なアプローチです。追跡するだけでなく、理解し、学び、情報に基づいた決定を下すことです。あなたを力づけるために設計されたツールです。</p>
                        <p class="text-lg font-bold text-center mt-6 text-gold">今日、より健康的で意識的な金融生活への第一歩を踏み出すことをお勧めします。Bancfyコミュニティに参加してください。</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ========== FAQセクション ========== -->
        <section id="faq" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">よくある質問</h2>
                    <p class="text-gray-600 mt-2 max-w-3xl mx-auto reveal" style="transition-delay: 200ms;">疑問がありますか？ここで最も一般的なものにお答えします。</p>
                </div>
                <div class="max-w-3xl mx-auto space-y-4">
                    <!-- FAQ Items -->
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>Bancfyとは具体的に何ですか？</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                            <p>Bancfyはあなたのパーソナル金融コーチです。日本の家計簿メソッドを、デジタルで直感的、そしてゲーム化された体験に変えました。支出を記録するだけでなく、それを理解し、簡単でやる気の出る方法でお金の管理を取り戻すお手伝いをします。</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>Bancfyで私のデータを使用するのは安全ですか？</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                            <p>もちろんです。セキュリティは私たちの基盤です。すべての情報はエンドツーエンドの暗号化と銀行レベルのセキュリティプロトコルで保護されています。あなたのプライバシーとデータはあなただけのものです。</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>異なるデバイス間で同期できますか？</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                           <p>はい、できます！あなたの情報はすべてのデバイスでリアルタイムに同期されます。さらに、「共有口座」機能も搭載しており、パートナーや家族、ルームメイトとの家計管理に最適です。</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>銀行口座を接続する必要がありますか？</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                           <p>その必要はありません。家計簿メソッドが教えるように、意識を高めるために手動で支出を記録することの力を信じています。しかし、柔軟性を提供するために、PDF、Excel、またはCSVファイルから取引を迅速かつ簡単にインポートすることもできます。</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>Bancfyは無料ですか？</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                           <p>はい、Bancfyの中核は常に無料で、日々の生活に必要なすべてのツールを提供します。財政を次のレベルに引き上げたい方のために、高度な機能を備えた補完的なプレミアムオプションを提供します。</p>
                        </div>
                    </div>
                    <div class="faq-item border-b border-gray-200 pb-4 reveal">
                        <button class="faq-question w-full flex justify-between items-center text-left text-lg font-semibold text-navy">
                            <span>どの通貨と暗号通貨をサポートしていますか？</span>
                            <svg class="faq-arrow w-5 h-5 text-gold transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="faq-answer text-gray-600">
                           <p>私たちはグローバルな世界に対応しています。Bancfyは50以上の従来の通貨と30以上の主要な暗号通貨をサポートしており、すべての資産を一つの場所で完全に把握できます。</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== ニュースレターセクション ========== -->
        <section id="newsletter" class="py-20 bg-light-gray">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">金融革命は2025年11月に始まります。</h2>
                <p class="text-gray-600 mt-3 max-w-2xl mx-auto mb-8 reveal" style="transition-delay: 200ms;">
                    乗り遅れないでください。ニュースレターに登録して、早期アクセス、限定ニュース、そして繁栄への道を準備するためのヒントをいち早く手に入れましょう。
                </p>
                <form id="newsletter-form" class="max-w-lg mx-auto reveal" style="transition-delay: 400ms;" novalidate>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="email" name="email" placeholder="あなたの最高のメールアドレス" required class="w-full px-5 py-3 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors" />
                        <button type="submit" class="bg-gold text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-gold-hover transition-all duration-300 transform hover:scale-105">
                            登録する！
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- ========== お問い合わせセクション ========== -->
        <section id="contact" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-navy reveal">お話ししましょう</h2>
                    <p class="text-gray-600 mt-2 max-w-2xl mx-auto mb-8 reveal" style="transition-delay: 200ms;">
                        コラボレーション、プレス、その他のお問い合わせについては、私たちのチームがいつでもお聞きします。フォームに記入するか、<a href="mailto:info@bancfy.com" class="text-gold font-semibold hover:underline">info@bancfy.com</a>までご連絡ください。
                    </p>
                </div>
                <form id="contact-form" action="https://formspree.io/f/mblkoarn" method="POST" class="max-w-xl mx-auto bg-white p-8 rounded-xl shadow-lg reveal" style="transition-delay: 400ms;" novalidate>
                    <div class="space-y-6">
                        <div>
                            <label for="name" class="block text-sm font-semibold text-gray-700 mb-1">名前</label>
                            <input type="text" name="name" id="name" required class="w-full px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-semibold text-gray-700 mb-1">メールアドレス</label>
                            <input type="email" name="email" id="email" required class="w-full px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors">
                        </div>
                        <div>
                            <label for="subject" class="block text-sm font-semibold text-gray-700 mb-1">件名</label>
                            <input type="text" name="subject" id="subject" required class="w-full px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-semibold text-gray-700 mb-1">メッセージ</label>
                            <textarea name="message" id="message" rows="4" required class="w-full px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-gold focus:ring-gold transition-colors"></textarea>
                        </div>
                        <div>
                            <button type="submit" class="w-full bg-gold text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-gold-hover transition-all duration-300 transform hover:scale-105">
                                メッセージを送信
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <!-- ========== フッター ========== -->
    <footer class="bg-navy text-white">
        <div class="container mx-auto px-6 py-8">
             <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left">
                <div class="mb-4 md:mb-0">
                    <p class="font-semibold">&copy; 2025 Bancfy. 無断複写・転載を禁じます。</p>
                    <p class="text-sm text-gray-400">あなたの金融の幸福のために<span class="text-gold">&hearts;</span>を込めて設計されました。</p>
                </div>
                <!-- ソーシャルアイコン -->
                <div class="flex space-x-5">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="Instagram"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163zm0 1.802c-3.143 0-3.505.011-4.73.068-2.695.123-3.993 1.423-4.116 4.116-.057 1.225-.068 1.586-.068 4.73s.011 3.505.068 4.73c.123 2.692 1.421 3.993 4.116 4.116 1.225.057 1.587.068 4.73.068s3.505-.011 4.73-.068c2.695-.123 3.993-1.423 4.116-4.116.057-1.225.068-1.586.068-4.73s-.011-3.505-.068-4.73c-.123-2.692-1.421-3.993-4.116-4.116-1.225-.057-1.586-.068-4.73-.068zm0 3.064c-2.835 0-5.153 2.318-5.153 5.153s2.318 5.153 5.153 5.153 5.153-2.318 5.153-5.153-2.318-5.153-5.153-5.153zm0 8.505c-1.841 0-3.35-1.509-3.35-3.35s1.509-3.35 3.35-3.35 3.35 1.509 3.35 3.35-1.509 3.35-3.35 3.35zm4.512-8.305c-.796 0-1.441.645-1.441 1.441s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.441-1.441-1.441z"/></svg></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="TikTok"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.05-4.84-.95-6.43-2.8-1.59-1.87-2.25-4.38-1.91-6.78.34-2.4 1.91-4.44 3.96-5.74.96-.6 2.07-.97 3.22-1.15.06-1.54.03-3.08.01-4.63.23-.02.47-.02.7-.02 1.33-.01 2.65-.02 3.98-.03z"/></svg></a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="YouTube"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- ========== フィードバックモーダル ========== -->
    <div id="feedback-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden modal-backdrop">
        <div class="bg-white rounded-lg shadow-2xl p-8 max-w-sm w-full text-center modal-content opacity-0 transform scale-95">
            <h3 id="modal-title" class="text-2xl font-bold text-navy mb-4"></h3>
            <p id="modal-message" class="text-gray-600 mb-6"></p>
            <button id="modal-close-button" class="bg-gold text-white font-bold py-2 px-6 rounded-lg hover:bg-gold-hover transition-colors">閉じる</button>
        </div>
    </div>

    <!-- ========== フォームフィードバック用のアイコン（非表示） ========== -->
    <div class="hidden">
        <svg id="icon-spinner" class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <svg id="icon-check" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg>
        <svg id="icon-error" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
    </div>
    
    <!-- Firebase SDK (更新版) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, where, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyDMjE9AFpmtPKcvZDMx-okQoKpHcjUF-Uc",
            authDomain: "bancfy.firebaseapp.com",
			databaseURL: "https://bancfy-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "bancfy",
            storageBucket: "bancfy.appspot.com",
            messagingSenderId: "151762707230",
            appId: "1:151762707230:web:2143e1d92e6a90f2689f0f",
			measurementId: "G-RS0WGCECK3"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.db = db;
        window.firestore = { collection, addDoc, serverTimestamp, query, where, getDocs };
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 言語セレクターのロジック ---
            const supportedLangs = {
                'es': { name: 'Español', flag: 'es', url: '/es/' },
                'ca': { name: 'Català', flagUrl: 'https://upload.wikimedia.org/wikipedia/commons/c/ce/Flag_of_Catalonia.svg', url: '/ca/' },
                'eu': { name: 'Euskara', flagUrl: 'https://upload.wikimedia.org/wikipedia/commons/2/2d/Flag_of_the_Basque_Country.svg', url: '/eu/' },
                'en': { name: 'English', flag: 'gb', url: '/' },
                'de': { name: 'Deutsch', flag: 'de', url: '/de/' },
                'de-ch': { name: 'Schweizerdeutsch', flag: 'ch', url: '/de-ch/' },
                'fr': { name: 'Français', flag: 'fr', url: '/fr/' },
                'it': { name: 'Italiano', flag: 'it', url: '/it/' },
                'pt': { name: 'Português', flag: 'pt', url: '/pt/' },
                'ja': { name: '日本語', flag: 'jp', url: '/ja/' },
                'ko': { name: '한국어', flag: 'kr', url: '/ko/' },
                'zh': { name: '中文', flag: 'cn', url: '/zh/' },
                'ar': { name: 'العربية', flag: 'ae', url: '/ar/' }
            };

            const langDropdown = document.getElementById('lang-dropdown');
            const mobileLangDropdown = document.getElementById('mobile-lang-dropdown');

            for (const [code, langData] of Object.entries(supportedLangs)) {
                if (code === 'ja') continue; // 現在の言語をリストに表示しない

                const flagSrc = langData.flagUrl ? langData.flagUrl : `https://flagcdn.com/w20/${langData.flag}.png`;
                const innerHTML = `<img src="${flagSrc}" alt="${langData.name}の国旗" class="w-5 h-auto mr-3 rounded-sm"><span class="flex-1">${langData.name}</span>`;

                // デスクトップメニュー用のリンクを作成
                const desktopLink = document.createElement('a');
                desktopLink.href = langData.url;
                desktopLink.classList.add('flex', 'items-center', 'px-4', 'py-2', 'text-sm', 'text-gray-700', 'hover:bg-light-gray');
                desktopLink.innerHTML = innerHTML;
                langDropdown.appendChild(desktopLink);

                // モバイルメニュー用のリンクを作成
                const mobileLink = document.createElement('a');
                mobileLink.href = langData.url;
                mobileLink.classList.add('flex', 'items-center', 'py-1.5', 'px-2', 'text-sm', 'text-gray-700', 'hover:text-gold', 'rounded-md', 'hover:bg-white');
                mobileLink.innerHTML = innerHTML;
                mobileLangDropdown.appendChild(mobileLink);
            }
            
            // --- モバイルメニューとドロップダウンのロジック ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileLangSelectorBtn = document.getElementById('mobile-lang-selector-btn');
            const mobileLangArrow = document.querySelector('.mobile-lang-arrow');
            
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            mobileLangSelectorBtn.addEventListener('click', (event) => {
                event.stopPropagation();
                mobileLangDropdown.classList.toggle('hidden');
                mobileLangArrow.classList.toggle('rotate-180');
            });

            mobileMenu.addEventListener('click', (e) => {
                if(e.target.tagName === 'A' && !mobileLangDropdown.contains(e.target) && !mobileLangSelectorBtn.contains(e.target)) {
                    mobileMenu.classList.add('hidden');
                }
            });

            // --- アニメーションとFAQのロジック ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
            
            document.querySelectorAll('.faq-question').forEach(button => {
                button.addEventListener('click', () => {
                    const faqItem = button.parentElement;
                    faqItem.classList.toggle('active');
                });
            });

            // --- フィードバックモーダルのロジック ---
            const modal = document.getElementById('feedback-modal');
            const modalContent = modal.querySelector('.modal-content');
            const modalTitle = document.getElementById('modal-title');
            const modalMessage = document.getElementById('modal-message');
            const modalCloseButton = document.getElementById('modal-close-button');
            
            const modalTranslations = {
                ja: {
                    modal_close: '閉じる', modal_thank_you: 'ありがとうございます！', modal_message_sent: 'メッセージは正常に送信されました。', modal_welcome: 'ようこそ！', modal_subscribed: 'ニュースレターに登録しました。', modal_error: 'エラー', modal_message_error: 'メッセージを送信できませんでした。もう一度お試しください。', modal_network_error: 'おっと！ネットワークに問題が発生しました。接続を確認してください。', modal_subscribe_error: '登録を処理できませんでした。後でもう一度お試しください。', modal_email_exists: 'このメールアドレスは既に登録されています。ご興味をお持ちいただきありがとうございます！', modal_invalid_email: '有効なメールアドレスを入力してください。',
                    form_sending: '送信中...', form_sent: '送信済み', form_error: 'エラー', form_subscribing: '登録中...', form_subscribed: '登録済み'
                }
            };
            const t = modalTranslations.ja;

            function showModal(titleKey, messageKey) {
                modalTitle.textContent = t[titleKey] || titleKey;
                modalMessage.textContent = t[messageKey] || messageKey;
                modalCloseButton.textContent = t['modal_close'];
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.style.opacity = '1';
                    modalContent.style.opacity = '1';
                    modalContent.style.transform = 'scale(1)';
                }, 10);
            }

            function hideModal() {
                 modal.style.opacity = '0';
                 modalContent.style.opacity = '0';
                 modalContent.style.transform = 'scale(0.95)';
                 setTimeout(() => modal.classList.add('hidden'), 300);
            }
            modalCloseButton.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) hideModal(); });

            // --- フォームのロジック ---
            const contactForm = document.getElementById('contact-form');
            const newsletterForm = document.getElementById('newsletter-form');

            const setButtonFeedback = (button, state, originalHTML) => {
                const feedbackText = {
                    contact: { loading: t.form_sending, success: t.form_sent, error: t.form_error },
                    newsletter: { loading: t.form_subscribing, success: t.form_subscribed, error: t.form_error }
                };
                const formType = button.form.id.includes('contact') ? 'contact' : 'newsletter';
                const text = feedbackText[formType][state] || '';
                button.disabled = true;
                button.innerHTML = '';
                if(!button.dataset.originalClasses) {
                    const originalClasses = Array.from(button.classList);
                    button.dataset.originalClasses = JSON.stringify(originalClasses.filter(c => c.startsWith('bg-') || c.startsWith('hover:bg-') || c.startsWith('transform') || c.startsWith('hover:scale')));
                }
                button.classList.remove(...JSON.parse(button.dataset.originalClasses));
                button.classList.add('flex', 'items-center', 'justify-center', 'transition-all');
                const icons = {
                    loading: document.getElementById('icon-spinner')?.cloneNode(true),
                    success: document.getElementById('icon-check')?.cloneNode(true),
                    error: document.getElementById('icon-error')?.cloneNode(true)
                };
                const icon = icons[state];
                if (icon) {
                    icon.classList.remove('hidden');
                    button.appendChild(icon);
                }
                if (text) {
                    const textSpan = document.createElement('span');
                    textSpan.className = 'ml-2';
                    textSpan.textContent = text;
                    button.appendChild(textSpan);
                }
                if (state === 'success') button.classList.add('bg-green-500');
                else if (state === 'error') button.classList.add('bg-red-500');
                else button.classList.add('bg-gold', 'opacity-75');
                if (state === 'success' || state === 'error') {
                    setTimeout(() => {
                        button.disabled = false;
                        button.innerHTML = originalHTML;
                        button.classList.remove('flex', 'items-center', 'justify-center', 'bg-green-500', 'bg-red-500', 'bg-gold', 'opacity-75', 'transition-all');
                        button.classList.add(...JSON.parse(button.dataset.originalClasses));
                    }, 2500);
                }
            };

            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const form = e.target;
                const button = form.querySelector('button[type="submit"]');
                const originalButtonHTML = button.innerHTML;
                setButtonFeedback(button, 'loading', originalButtonHTML);
                fetch(form.action, {
                    method: 'POST', body: new FormData(form), headers: { 'Accept': 'application/json' }
                }).then(response => {
                    if (response.ok) {
                        setButtonFeedback(button, 'success', originalButtonHTML);
                        setTimeout(() => { showModal('modal_thank_you', 'modal_message_sent'); form.reset(); }, 500);
                    } else { throw new Error('Response not ok'); }
                }).catch(() => {
                    setButtonFeedback(button, 'error', originalButtonHTML);
                    setTimeout(() => showModal('modal_error', 'modal_message_error'), 500);
                });
            });

            newsletterForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const form = e.target;
                const emailInput = form.querySelector('input[name="email"]');
                const emailValue = emailInput.value.trim().toLowerCase();
                const button = form.querySelector('button[type="submit"]');
                const originalButtonHTML = button.innerHTML;

                if (!emailValue || !emailInput.checkValidity()) {
                    showModal('modal_error', 'modal_invalid_email');
                    return;
                }
                if (typeof window.db === 'undefined' || typeof window.firestore === 'undefined') {
                    showModal('modal_error', 'modal_network_error');
                    return;
                }
                setButtonFeedback(button, 'loading', originalButtonHTML);
                const { collection, query, where, getDocs, addDoc, serverTimestamp } = window.firestore;
                const subscribersRef = collection(window.db, "subscribers");
                try {
                    const q = query(subscribersRef, where("email", "==", emailValue));
                    const querySnapshot = await getDocs(q);
                    if (!querySnapshot.empty) {
                        showModal('modal_welcome', 'modal_email_exists');
                        setButtonFeedback(button, 'success', originalButtonHTML);
                        return;
                    }
                    await addDoc(subscribersRef, {
                        email: emailValue,
                        subscribedAt: serverTimestamp(),
                        language: 'ja'
                    });
                    setButtonFeedback(button, 'success', originalButtonHTML);
                    setTimeout(() => { showModal('modal_welcome', 'modal_subscribed'); form.reset(); }, 500);
                } catch (error) {
                    console.error("ドキュメントの確認/追加中にエラーが発生しました: ", error);
                    setButtonFeedback(button, 'error', originalButtonHTML);
                    setTimeout(() => showModal('modal_error', 'modal_subscribe_error'), 500);
                }
            });
        });
    </script>

</body>
</html>
